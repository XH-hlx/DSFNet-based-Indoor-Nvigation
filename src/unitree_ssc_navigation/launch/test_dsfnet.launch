<launch>
  <!-- ==================================== -->
  <!-- Test DSFNet Inference Only -->
  <!-- ==================================== -->

  <arg name="dsfnet_model_path" default="" />
  <arg name="rgb_topic" default="/camera/color/image_raw" />
  <arg name="depth_topic" default="/camera/depth/image_raw" />

  <!-- DSFNet Inference Node -->
  <node pkg="unitree_ssc_navigation" type="dsfnet_inference_node.py" name="dsfnet_inference" output="screen" required="true">
    <param name="model_path" value="$(arg dsfnet_model_path)" />
    <param name="num_classes" value="12" />
    <param name="fx" value="387.229248046875" />
    <param name="fy" value="387.229248046875" />
    <param name="cx" value="321.04638671875" />
    <param name="cy" value="243.44969177246094" />
    <param name="img_height" value="480" />
    <param name="img_width" value="640" />

    <remap from="/camera/color/image_raw" to="$(arg rgb_topic)" />
    <remap from="/camera/depth/image_raw" to="$(arg depth_topic)" />
  </node>

  <!-- SSC to Planner Bridge -->
  <node pkg="unitree_ssc_navigation" type="ssc_to_planner_bridge.py" name="ssc_to_planner_bridge" output="screen">
    <param name="ground_height_threshold" value="0.3" />
    <param name="max_height" value="2.0" />
    <param name="min_height" value="-0.5" />
    <param name="max_range" value="10.0" />
  </node>

  <!-- RViz for visualization -->
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find unitree_ssc_navigation)/config/dsfnet_test.rviz" />

</launch>
